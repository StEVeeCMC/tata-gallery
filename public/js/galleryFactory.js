// Generated by CoffeeScript 1.3.3
(function() {

  $(function($) {
    var type;
    type = getCollectionType();
    return $.get('/struct', function(collections) {
      var appendNextCollection;
      return (appendNextCollection = function(collections) {
        var $content, $rgGallery, collection, imagesCollection;
        if (collections.length === 0) {
          return;
        }
        collection = collections.pop();
        if (collection.type === type) {
          imagesCollection = [];
          collection.images.forEach(function(image) {
            return imagesCollection.push({
              dataLarge: 'img/all/' + image.imageURL,
              dataThumb: 'img/all/thumbs/' + image.thumbURL,
              collectionName: collection.name,
              fileName: image.imageURL
            });
          });
          $content = $('div.content');
          $rgGallery = $('#rg-gallery-tmpl').tmpl({
            description: collection.description,
            imagesCollection: imagesCollection
          }).appendTo($content);
          $rgGallery.bind("firstImageIsReady", function() {
            return appendNextCollection(collections);
          });
          return createNewGallery($rgGallery, collection, isAdmin);
        } else {
          return appendNextCollection(collections);
        }
      })(collections);
    });
  });

}).call(this);
